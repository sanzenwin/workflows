name: ~python3 publish self
on:
  workflow_call:
    inputs:
      scope:
        required: true
        type: string
      token:
        required: true
        type: string
jobs:
  publish-self-abc:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/setup-python@v4
      with:
        python-version: 3
    - uses: actions/setup-pdm@v3
    - uses: actions/checkout@v3
    - run: pdm build
    - uses: actions/gh-action-pypi-publish@release/v1
      with:
        repository-url: ${{ env.GITHUB_SERVER_URL }}/api/packages/${{ inputs.scope }}/pypi/
        user: ${{ env.GITHUB_ACTOR }}
        password: ${{ inputs.token }}
